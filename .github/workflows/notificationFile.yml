name: Send Email with HTML Body

on: workflow_dispatch

env:
# HTML_CONTENT: '<html><body><p>This is the HTML content</p></body></html>'
  html_content: ""

jobs:
  sendemail:
    runs-on: ubuntu-latest
    outputs:
      env: ${{ steps.set-html-content.outputs.env }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Read HTML file content
        id: set-html-content
        run: |
          echo "html_content=$(cat test.html)"

  Send-Notifation:
       needs: sendemail
       runs-on: ubuntu-latest
       steps:
         - name: Send mail notification
           uses: dawidd6/action-send-mail@v2
           with:
             server_address: smtp.gmail.com
             server_port: 587
             username: notificsunpower@gmail.com
             password: xhbexzslqdxniljz
             subject: Monitoring Coverage Report
             body: ${{html_content}} 
             content_type: text/html
             to: priyaveera96@gmail.com
             from: notificsunpower@gmail.com
